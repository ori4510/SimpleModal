class SimpleModal{static idsList=[];static scrollbarWidth=SimpleModal.getScrollWidth();_boundCloseModalWithEsc=this._closeModalWithEsc.bind(this);_boundCloseModalClick=this._closeModalClick.bind(this);_boundCloseModalClickWithEnter=this._closeModalWithEnter.bind(this);_modalElem=null;constructor({modalId:t=null,title:e=!1,content:o=!1,type:n="simple",openWithBtn:l=!1,modalInfoBtnText:d="Ok",modalConfirmBtnText:i="Ok",modalCancelBtnText:s="Cancel",wideModal:a=!1,onOpen:c=null,onClose:m=null,onConfirm:r=null,onCancel:h=null}){if(this.modalId=t,this.title=e,this.content=o,this.type=n,this.openWithBtn=l,this.modalInfoBtnText=d,this.modalConfirmBtnText=i,this.modalCancelBtnText=s,this.wideModal=a,this.onOpen=c,this.onClose=m,this.onConfirm=r,this.onCancel=h,!SimpleModal.idsList.includes(t))return SimpleModal.idsList.push(t),{createModal:()=>this._renderModal(),getModal:()=>this._getModal()}}static getScrollWidth(){const t=document.createElement("div");t.style.overflowY="scroll",t.style.width="50px",t.style.height="50px",document.body.append(t);const e=t.offsetWidth-t.clientWidth;return t.remove(),e}_renderModal(){let t=this._createModal();return"info"===this.type&&(t=this._createInfoModal(t)),"confirm"===this.type&&(t=this._createConfirmModal(t)),t&&document.body.append(t),this.openWithBtn&&this._openWithBtn(),this}_getModal(){return this.modalId,this.openWithBtn&&this._openWithBtn(),this}_createModal(){if(!this.modalId)return!1;const t=document.createElement("div");t.classList.add("dom-modal-mask"),t.id=this.modalId;const e=document.createElement("div");e.classList.add("dom-modal-window"),!0===this.wideModal&&e.classList.add("dom-modal-wide");const o=document.createElement("span");o.classList.add("dom-modal-exit","dom-modal-close-with-click"),o.innerHTML='<svg width="22" height="22" stroke-width="2" stroke="currentColor" stroke-linecap="round" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 6 6 18M6 6l12 12"></path></svg>';const n=document.createElement("div");if(n.classList.add("dom-modal-container"),this.title){const t=document.createElement("h4");t.classList.add("dom-modal-title"),t.innerHTML=this.title,n.append(t)}if(this.content){const t=document.createElement("div");t.classList.add("dom-modal-content"),t.innerHTML=this.content,n.append(t)}return e.append(o,n),t.append(e),t}_createInfoModal(t){const e=t.querySelector(".dom-modal-container"),o=document.createElement("div");o.classList.add("dom-modal-btn-wrap");const n=document.createElement("button");return n.setAttribute("type","button"),n.classList.add("btn","dom-modal-close-with-click","dom-modal-btn-info"),n.textContent=this.modalInfoBtnText,o.append(n),e&&e.append(o),t}_createConfirmModal(t){const e=t.querySelector(".dom-modal-container"),o=document.createElement("div");o.classList.add("dom-modal-btn-wrap");const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("btn","dom-modal-close-with-click","dom-modal-btn-confirm"),n.textContent=this.modalConfirmBtnText;const l=document.createElement("button");return l.setAttribute("type","button"),l.classList.add("btn","dom-modal-close-with-click","dom-modal-btn-cancel"),l.textContent=this.modalCancelBtnText,o.append(n),o.append(l),e&&e.append(o),t}_closeModalClick(t){(t.target===this._modalElem||t.target.classList.contains("dom-modal-close-with-click"))&&("confirm"===this.type&&(t.target.classList.contains("dom-modal-btn-confirm")?this._modalConfirmTrue():t.target.classList.contains("dom-modal-btn-cancel")&&this._modalConfirmFalse()),this.closeModal())}_closeModalWithEsc(t){"Escape"===t.key&&(t.preventDefault(),this.closeModal())}_closeModalWithEnter(t){"Enter"===t.key&&(t.preventDefault(),"confirm"===this.type&&this._modalConfirmTrue(),this.closeModal())}_modalConfirmTrue(){"function"==typeof this.onConfirm&&this.onConfirm()}_modalConfirmFalse(){"function"==typeof this.onCancel&&this.onCancel()}_onModalOpen(){"function"==typeof this.onOpen&&this.onOpen()}_onModalClose(){"function"==typeof this.onClose&&this.onClose()}_openWithBtn(t){this._openBtns=document.querySelectorAll(`[data-dom-modal=${this.modalId}]`),this._openBtns.forEach((t=>{t.addEventListener("click",this._boundOpenWithBtn)}))}_boundOpenWithBtn=t=>{t.preventDefault(),this.openModal()};_addNoTremorContent(){document.body.classList.add("dom-modal-open"),document.body.scrollHeight>window.innerHeight&&(document.body.style.paddingRight=SimpleModal.scrollbarWidth+"px")}_removeNoTremorContent(){document.body.classList.remove("dom-modal-open"),document.body.style.paddingRight=""}openModal(){if(this._modalElem=document.getElementById(this.modalId),this._modalElem)return"info"===this.type&&(document.addEventListener("keydown",this._boundCloseModalClickWithEnter),this._modalElem.querySelector(".dom-modal-btn-info").addEventListener("click",this._boundCloseModalClick)),"confirm"===this.type&&document.addEventListener("keydown",this._boundCloseModalClickWithEnter),this._addNoTremorContent(),this._modalElem.classList.add("dom-modal-show"),document.addEventListener("keydown",this._boundCloseModalWithEsc),this._modalElem.addEventListener("click",this._boundCloseModalClick),this._modalElem.querySelector(".dom-modal-exit").addEventListener("click",this._boundCloseModalClick),this._onModalOpen(),this}closeModal(){this._removeNoTremorContent(),this._modalElem.classList.remove("dom-modal-show"),document.removeEventListener("keydown",this._boundCloseModalWithEsc),document.removeEventListener("keydown",this._boundCloseModalClickWithEnter),this._modalElem.removeEventListener("click",this._boundCloseModalClick);return this._modalElem.querySelectorAll(".dom-modal-close-with-click").forEach((t=>{t.removeEventListener("click",this._boundCloseModalClick)})),this._onModalClose(),this}destroyModal(){return this._modalElem?.classList.contains("dom-modal-show")&&this.closeModal(),this._openBtns&&this._openBtns.forEach((t=>{t.removeEventListener("click",this._boundOpenWithBtn)})),this._modalElem&&this._modalElem.remove(),SimpleModal.idsList=SimpleModal.idsList.filter((t=>t!==this.modalId)),this._modalElem=null,this._openBtns=null,null}}function Modal(t={}){return new SimpleModal(t)}